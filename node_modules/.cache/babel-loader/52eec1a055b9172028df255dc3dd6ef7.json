{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/taehyungkim/Desktop/self-study/project_picdiary_deploy/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import React,{useRef}from\"react\";import styled from\"styled-components\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Add=function Add(_ref){var picData=_ref.picData,setPicData=_ref.setPicData;var dateRef=useRef(null);var navigate=useNavigate();var Add_container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    width: 390px;\\n    height: 100%;\\n    display: flex;\\n    flex-direction: column;\\n  \"])));var Info_container=styled.form(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    height: 76px;\\n    background-color: #f4eee2;\\n    margin-bottom: 20px;\\n    display: flex;\\n\\n    > .info_wrapper {\\n      flex-grow: 5;\\n      display: flex;\\n      flex-direction: column;\\n      justify-content: space-around;\\n      align-items: stretch;\\n    }\\n    > .icon_wrapper {\\n      flex-grow: 1;\\n      display: flex;\\n      justify-content: center;\\n      align-items: center;\\n    }\\n  \"])));var handleSubmit=function handleSubmit(e){var getRandomNumber=function getRandomNumber(min,max){return parseInt(Math.random()*(Number(max)-Number(min)+2));};// setPicData([\n//   ...picData,\n//   {\n//     id: picData.length,\n//     date: e.target[0].value,\n//     title: e.target[1].value,\n//     content: [\n//       {\n//         date_id: 0,\n//         picture: `https://picsum.photos/id/${getRandomNumber(\n//           1,\n//           98\n//         )}/300/300`,\n//         text: \"\",\n//       },\n//     ],\n//   },\n// ]);\nfetch(\"http://localhost:3001/diary/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:picData.length,date:e.target[0].value,title:e.target[1].value,content:[{date_id:0,picture:\"https://picsum.photos/id/\".concat(getRandomNumber(1,98),\"/300/300\"),text:\"\"}]})});navigate(\"/add/\".concat(e.target[0].value));};var onFocus=function onFocus(){fetch(\"http://localhost:3001/diary/?date=\".concat(dateRef.current.value)).then(function(res){if(!res.ok){throw Error(\"could not fetch the data for that resource\");}return res.json();}).then(function(data){if(data.length>0){alert(\"해당 날짜 데이터로 이동합니다\");navigate(\"/add/\".concat(dateRef.current.value));}});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Add_container,{children:/*#__PURE__*/_jsxs(Info_container,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info_wrapper\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\uB0A0\\uC9DC :\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",ref:dateRef})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\uC81C\\uBAA9 :\",/*#__PURE__*/_jsx(\"input\",{onFocus:onFocus})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"icon_wrapper\",children:/*#__PURE__*/_jsx(\"button\",{children:\"\\uC0AC\\uC9C4\\uCD94\\uAC00\"})})]})})});};export default Add;","map":{"version":3,"names":["React","useRef","styled","useNavigate","Add","picData","setPicData","dateRef","navigate","Add_container","div","Info_container","form","handleSubmit","e","getRandomNumber","min","max","parseInt","Math","random","Number","fetch","method","headers","body","JSON","stringify","id","length","date","target","value","title","content","date_id","picture","text","onFocus","current","then","res","ok","Error","json","data","alert"],"sources":["/Users/taehyungkim/Desktop/self-study/project_picdiary_deploy/src/components/Add.js"],"sourcesContent":["import React, { useRef } from \"react\";\nimport styled from \"styled-components\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst Add = ({ picData, setPicData }) => {\n  const dateRef = useRef(null);\n  let navigate = useNavigate();\n  const Add_container = styled.div`\n    width: 390px;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  `;\n  const Info_container = styled.form`\n    height: 76px;\n    background-color: #f4eee2;\n    margin-bottom: 20px;\n    display: flex;\n\n    > .info_wrapper {\n      flex-grow: 5;\n      display: flex;\n      flex-direction: column;\n      justify-content: space-around;\n      align-items: stretch;\n    }\n    > .icon_wrapper {\n      flex-grow: 1;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n  `;\n\n  const handleSubmit = (e) => {\n    const getRandomNumber = (min, max) => {\n      return parseInt(Math.random() * (Number(max) - Number(min) + 2));\n    };\n    // setPicData([\n    //   ...picData,\n    //   {\n    //     id: picData.length,\n    //     date: e.target[0].value,\n    //     title: e.target[1].value,\n    //     content: [\n    //       {\n    //         date_id: 0,\n    //         picture: `https://picsum.photos/id/${getRandomNumber(\n    //           1,\n    //           98\n    //         )}/300/300`,\n    //         text: \"\",\n    //       },\n    //     ],\n    //   },\n    // ]);\n    fetch(\"http://localhost:3001/diary/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        id: picData.length,\n        date: e.target[0].value,\n        title: e.target[1].value,\n        content: [\n          {\n            date_id: 0,\n            picture: `https://picsum.photos/id/${getRandomNumber(\n              1,\n              98\n            )}/300/300`,\n            text: \"\",\n          },\n        ],\n      }),\n    });\n\n    navigate(`/add/${e.target[0].value}`);\n  };\n\n  const onFocus = () => {\n    fetch(`http://localhost:3001/diary/?date=${dateRef.current.value}`)\n      .then((res) => {\n        if (!res.ok) {\n          throw Error(\"could not fetch the data for that resource\");\n        }\n        return res.json();\n      })\n      .then((data) => {\n        if (data.length > 0) {\n          alert(\"해당 날짜 데이터로 이동합니다\");\n          navigate(`/add/${dateRef.current.value}`);\n        }\n      });\n  };\n\n  return (\n    <>\n      <Add_container>\n        <Info_container onSubmit={handleSubmit}>\n          <div className=\"info_wrapper\">\n            <label>\n              날짜 :<input type=\"date\" ref={dateRef}></input>\n            </label>\n            <label>\n              제목 :<input onFocus={onFocus}></input>\n            </label>\n          </div>\n          <div className=\"icon_wrapper\">\n            <button>사진추가</button>\n          </div>\n        </Info_container>\n      </Add_container>\n    </>\n  );\n};\n\nexport default Add;\n"],"mappings":"wMAAA,MAAOA,MAAP,EAAgBC,MAAhB,KAA8B,OAA9B,CACA,MAAOC,OAAP,KAAmB,mBAAnB,CACA,OAASC,WAAT,KAA4B,kBAA5B,C,6IAEA,GAAMC,IAAG,CAAG,QAANA,IAAM,MAA6B,IAA1BC,QAA0B,MAA1BA,OAA0B,CAAjBC,UAAiB,MAAjBA,UAAiB,CACvC,GAAMC,QAAO,CAAGN,MAAM,CAAC,IAAD,CAAtB,CACA,GAAIO,SAAQ,CAAGL,WAAW,EAA1B,CACA,GAAMM,cAAa,CAAGP,MAAM,CAACQ,GAAV,4JAAnB,CAMA,GAAMC,eAAc,CAAGT,MAAM,CAACU,IAAV,0dAApB,CAqBA,GAAMC,aAAY,CAAG,QAAfA,aAAe,CAACC,CAAD,CAAO,CAC1B,GAAMC,gBAAe,CAAG,QAAlBA,gBAAkB,CAACC,GAAD,CAAMC,GAAN,CAAc,CACpC,MAAOC,SAAQ,CAACC,IAAI,CAACC,MAAL,IAAiBC,MAAM,CAACJ,GAAD,CAAN,CAAcI,MAAM,CAACL,GAAD,CAApB,CAA4B,CAA7C,CAAD,CAAf,CACD,CAFD,CAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAM,KAAK,CAAC,8BAAD,CAAiC,CACpCC,MAAM,CAAE,MAD4B,CAEpCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAF2B,CAKpCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,EAAE,CAAEvB,OAAO,CAACwB,MADO,CAEnBC,IAAI,CAAEhB,CAAC,CAACiB,MAAF,CAAS,CAAT,EAAYC,KAFC,CAGnBC,KAAK,CAAEnB,CAAC,CAACiB,MAAF,CAAS,CAAT,EAAYC,KAHA,CAInBE,OAAO,CAAE,CACP,CACEC,OAAO,CAAE,CADX,CAEEC,OAAO,oCAA8BrB,eAAe,CAClD,CADkD,CAElD,EAFkD,CAA7C,YAFT,CAMEsB,IAAI,CAAE,EANR,CADO,CAJU,CAAf,CAL8B,CAAjC,CAAL,CAsBA7B,QAAQ,gBAASM,CAAC,CAACiB,MAAF,CAAS,CAAT,EAAYC,KAArB,EAAR,CACD,CA7CD,CA+CA,GAAMM,QAAO,CAAG,QAAVA,QAAU,EAAM,CACpBhB,KAAK,6CAAsCf,OAAO,CAACgC,OAAR,CAAgBP,KAAtD,EAAL,CACGQ,IADH,CACQ,SAACC,GAAD,CAAS,CACb,GAAI,CAACA,GAAG,CAACC,EAAT,CAAa,CACX,KAAMC,MAAK,CAAC,4CAAD,CAAX,CACD,CACD,MAAOF,IAAG,CAACG,IAAJ,EAAP,CACD,CANH,EAOGJ,IAPH,CAOQ,SAACK,IAAD,CAAU,CACd,GAAIA,IAAI,CAAChB,MAAL,CAAc,CAAlB,CAAqB,CACnBiB,KAAK,CAAC,kBAAD,CAAL,CACAtC,QAAQ,gBAASD,OAAO,CAACgC,OAAR,CAAgBP,KAAzB,EAAR,CACD,CACF,CAZH,EAaD,CAdD,CAgBA,mBACE,sCACE,KAAC,aAAD,wBACE,MAAC,cAAD,EAAgB,QAAQ,CAAEnB,YAA1B,wBACE,aAAK,SAAS,CAAC,cAAf,wBACE,uDACM,cAAO,IAAI,CAAC,MAAZ,CAAmB,GAAG,CAAEN,OAAxB,EADN,GADF,cAIE,uDACM,cAAO,OAAO,CAAE+B,OAAhB,EADN,GAJF,GADF,cASE,YAAK,SAAS,CAAC,cAAf,uBACE,oDADF,EATF,GADF,EADF,EADF,CAmBD,CAhHD,CAkHA,cAAelC,IAAf"},"metadata":{},"sourceType":"module"}